name: 'Close stale issues and PRs'

on:
  schedule:
    - cron: '0 2 * * *' # Executa diariamente Ã s 2:00 AM UTC
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - name: Stale Bot
        uses: actions/stale@v9
        with:
          # Issues
          stale-issue-message: |
            ğŸ‘‹ Esta issue estÃ¡ marcada como obsoleta porque nÃ£o houve atividade recente.

            Se esta issue ainda Ã© relevante, por favor:
            - ğŸ”„ Comente para remover o rÃ³tulo "stale"
            - ğŸ“ Adicione informaÃ§Ãµes adicionais se necessÃ¡rio
            - ğŸ·ï¸ Adicione rÃ³tulos apropriados se aplicÃ¡vel

            Se nÃ£o houver atividade nos prÃ³ximos 7 dias, esta issue serÃ¡ fechada automaticamente.

            Obrigado pela sua contribuiÃ§Ã£o! ğŸ™

          close-issue-message: |
            ğŸ”’ Esta issue foi fechada automaticamente devido Ã  falta de atividade.

            Se vocÃª ainda estÃ¡ enfrentando este problema:
            - ğŸ†• Abra uma nova issue
            - ğŸ“ Inclua informaÃ§Ãµes atualizadas
            - ğŸ”— Referencie esta issue se necessÃ¡rio

            Obrigado! ğŸ™

          # Pull Requests
          stale-pr-message: |
            ğŸ‘‹ Este Pull Request estÃ¡ marcado como obsoleto porque nÃ£o houve atividade recente.

            Se este PR ainda Ã© relevante, por favor:
            - ğŸ”„ Comente para remover o rÃ³tulo "stale"
            - ğŸ”„ FaÃ§a rebase/merge com a branch principal
            - ğŸ“ Atualize a descriÃ§Ã£o se necessÃ¡rio

            Se nÃ£o houver atividade nos prÃ³ximos 7 dias, este PR serÃ¡ fechado automaticamente.

            Obrigado pela sua contribuiÃ§Ã£o! ğŸ™

          close-pr-message: |
            ğŸ”’ Este Pull Request foi fechado automaticamente devido Ã  falta de atividade.

            Se vocÃª ainda quer contribuir com estas mudanÃ§as:
            - ğŸ†• Abra um novo Pull Request
            - ğŸ”„ FaÃ§a rebase com a branch principal
            - ğŸ“ Atualize a descriÃ§Ã£o

            Obrigado! ğŸ™

          # ConfiguraÃ§Ãµes de tempo
          days-before-issue-stale: 30
          days-before-pr-stale: 21
          days-before-issue-close: 7
          days-before-pr-close: 7

          # Labels
          stale-issue-label: 'ğŸ•’ stale'
          stale-pr-label: 'ğŸ•’ stale'

          # ExceÃ§Ãµes - nÃ£o marcar como stale
          exempt-issue-labels: |
            ğŸ”¥ priority: high
            ğŸ“… priority: medium
            ğŸš§ in progress
            ğŸ›‘ blocked
            ğŸ“‹ backlog
            ğŸ‰ release
            ğŸŸ¢ good first issue
            ğŸŸ¡ help wanted

          exempt-pr-labels: |
            ğŸš§ in progress
            ğŸ” needs review
            ğŸ›‘ blocked
            ğŸ’¥ breaking change
            ğŸ‰ release

          # ConfiguraÃ§Ãµes adicionais
          remove-stale-when-updated: true
          remove-issue-stale-when-updated: true
          remove-pr-stale-when-updated: true

          # NÃ£o processar issues/PRs com estas labels
          exempt-all-issue-assignees: true
          exempt-all-pr-assignees: true

          # ConfiguraÃ§Ãµes de rate limiting
          operations-per-run: 100

          # NÃ£o processar issues/PRs em draft
          exempt-draft-pr: true

          # Mensagens de debug
          debug-only: false
