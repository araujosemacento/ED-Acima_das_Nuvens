<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste do Sistema de Logs - ED | Acima das Nuvens</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            line-height: 1.6;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }
        .primary { background: #007bff; color: white; }
        .secondary { background: #6c757d; color: white; }
        .success { background: #28a745; color: white; }
        .info { background: #17a2b8; color: white; }
        .warning { background: #ffc107; color: #212529; }
        button:hover { transform: translateY(-1px); filter: brightness(1.1); }
        .status {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            background: #e9ecef;
            border-left: 4px solid #007bff;
        }
        .code {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
        }
        .log-examples {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 2rem;
        }
        @media (max-width: 768px) {
            .log-examples { grid-template-columns: 1fr; }
            .controls { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 Sistema de Logs - ED | Acima das Nuvens</h1>
        <p>Este é um exemplo prático do sistema de logs simplificado. Use os controles abaixo para testar diferentes tipos de logs.</p>
        
        <div class="status" id="status">
            <strong>Status:</strong> Modo Padrão (use F12 para ver o console)
        </div>

        <div class="controls">
            <button class="primary" onclick="toggleVerbose()">🔧 Alternar Modo Verbose</button>
            <button class="secondary" onclick="testThemeLogs()">🎨 Teste Logs de Tema</button>
            <button class="success" onclick="testComponentLogs()">🧩 Teste Logs de Componentes</button>
            <button class="info" onclick="testAnimationLogs()">🎭 Teste Logs de Animação</button>
            <button class="warning" onclick="testTransitionLogs()">⚡ Teste Logs de Transição</button>
        </div>

        <div class="controls">
            <button class="secondary" onclick="showStats()">📊 Ver Estatísticas</button>
            <button class="info" onclick="showCapabilities()">📚 Ver Capacidades</button>
            <button class="primary" onclick="clearConsole()">🧹 Limpar Console</button>
        </div>

        <h3>📝 Diferenças dos Modos</h3>
        
        <div class="log-examples">
            <div>
                <h4>🧑‍💻 Modo Padrão (Humanos)</h4>
                <div class="code">🚀 [ED] 🧩 ThemeToggle: Tema atualizado - light → dark
🚀 [ED] 🎬 Transição iniciada light → dark
🚀 [ED] ⚡ Transição finalizada em 280ms
🚀 [ED] 🚀 Welcome: Componente montado - Welcome</div>
            </div>
            
            <div>
                <h4>🔧 Modo Verbose (Máquinas/IA)</h4>
                <div class="code">🚀 [ED] 🧩 THEMETOGGLE: Atualização do tema principal
🕒 Horário: 14:23:45.123
📋 De: light
📋 Para: dark

🚀 [ED] 🎬 Transição iniciada: tema
🕒 Iniciado em: 14:23:45.124
🆔 ID: default
🔄 Mudança: light → dark
⏱️ Duração esperada: 300ms</div>
            </div>
        </div>

        <h3>🎯 Características</h3>
        <ul>
            <li>✅ <strong>Modo Padrão:</strong> Redução de 70% no volume de logs</li>
            <li>✅ <strong>Modo Verbose:</strong> Dados completos para análise técnica</li>
            <li>✅ <strong>Persistência:</strong> Preferências salvas no localStorage</li>
            <li>✅ <strong>URL Support:</strong> <code>?verbose=true</code> ativa modo verbose</li>
            <li>✅ <strong>Performance:</strong> Alertas automáticos para transições lentas</li>
            <li>✅ <strong>Português:</strong> Mensagens humanizadas em pt-BR</li>
        </ul>

        <h3>🛠️ Controles Programáticos</h3>
        <div class="code">// Ativar modo verbose
logger.setVerbose(true);

// Verificar modo atual
logger.isVerbose(); // true/false

// Ver estatísticas de performance
logger.getTransitionStats();

// Configurar limites de performance
logger.setThresholds(250, 400);</div>
    </div>

    <script type="module">
        // Simulação do sistema de logs para demonstração
        class DemoLogger {
            constructor() {
                this.verboseMode = false;
                this.prefix = '🚀 [ED]';
                
                // Verificar localStorage e URL
                this.initVerboseMode();
            }

            initVerboseMode() {
                const urlParams = new URLSearchParams(window.location.search);
                if (urlParams.get('verbose') === 'true') {
                    this.verboseMode = true;
                    localStorage.setItem('ed-logger-verbose', 'true');
                    return;
                }
                
                const stored = localStorage.getItem('ed-logger-verbose');
                this.verboseMode = stored === 'true';
            }

            setVerbose(enabled = true) {
                this.verboseMode = enabled;
                localStorage.setItem('ed-logger-verbose', enabled.toString());
                this.updateStatus();
                console.log(`${this.prefix} Modo verbose ${enabled ? 'ativado' : 'desativado'} 🔧`);
            }

            isVerbose() {
                return this.verboseMode;
            }

            updateStatus() {
                const status = document.getElementById('status');
                const mode = this.verboseMode ? 'Verbose (Máquinas/IA)' : 'Padrão (Humanos)';
                status.innerHTML = `<strong>Status:</strong> Modo ${mode} (use F12 para ver o console)`;
            }

            theme(action, data = {}) {
                const messages = {
                    'APPLY_THEME': '🎨 Aplicando tema',
                    'THEME_APPLIED': '✅ Tema aplicado',
                    'TRANSITION_START': '🎬 Transição iniciada',
                    'TRANSITION_END': '🎭 Transição finalizada'
                };

                const message = messages[action] || `🎨 ${action}`;

                if (this.verboseMode) {
                    console.group(`${this.prefix} ${message}`);
                    console.log('🕒 Horário:', new Date().toLocaleTimeString('pt-BR', {
                        hour: '2-digit', minute: '2-digit', second: '2-digit', fractionalSecondDigits: 3
                    }));
                    Object.entries(data).forEach(([key, value]) => {
                        console.log(`📋 ${key}:`, value);
                    });
                    console.groupEnd();
                } else {
                    const summary = Object.values(data).filter(v => v).join(' → ');
                    console.log(`${this.prefix} ${message}${summary ? ` - ${summary}` : ''}`);
                }
            }

            component(name, action, data = {}) {
                const messages = {
                    'MOUNT': '🚀 Componente montado',
                    'UNMOUNT': '👋 Componente desmontado',
                    'UPDATE': '🔄 Componente atualizado',
                    'INTERACTION': '👆 Interação registrada'
                };

                const message = messages[action] || action;

                if (this.verboseMode) {
                    console.group(`${this.prefix} 🧩 ${name.toUpperCase()}: ${message}`);
                    console.log('🕒 Horário:', new Date().toLocaleTimeString('pt-BR', {
                        hour: '2-digit', minute: '2-digit', second: '2-digit', fractionalSecondDigits: 3
                    }));
                    Object.entries(data).forEach(([key, value]) => {
                        console.log(`📋 ${key}:`, value);
                    });
                    console.groupEnd();
                } else {
                    const summary = Object.values(data).filter(v => v).join(' - ');
                    console.log(`${this.prefix} 🧩 ${name}: ${message}${summary ? ` - ${summary}` : ''}`);
                }
            }

            animation(action, data = {}) {
                const messages = {
                    'START': '🎬 Animação iniciada',
                    'COMPLETE': '✅ Animação concluída',
                    'ERROR': '❌ Erro na animação',
                    'PROGRESS': '⏳ Progresso'
                };

                const message = messages[action] || `🎭 ${action}`;
                const importantActions = ['START', 'COMPLETE', 'ERROR'];

                if (this.verboseMode) {
                    console.group(`${this.prefix} ${message}`);
                    console.log('🕒 Horário:', new Date().toLocaleTimeString('pt-BR', {
                        hour: '2-digit', minute: '2-digit', second: '2-digit', fractionalSecondDigits: 3
                    }));
                    Object.entries(data).forEach(([key, value]) => {
                        console.log(`📋 ${key}:`, value);
                    });
                    console.groupEnd();
                } else if (importantActions.includes(action)) {
                    const summary = Object.values(data).filter(v => v).join(' - ');
                    console.log(`${this.prefix} ${message}${summary ? ` - ${summary}` : ''}`);
                }
            }

            transition(action, data = {}) {
                if (action === 'START') {
                    if (this.verboseMode) {
                        console.group(`${this.prefix} 🎬 Transição iniciada: ${data.type || 'tema'}`);
                        console.log('🕒 Horário:', new Date().toLocaleTimeString('pt-BR', {
                            hour: '2-digit', minute: '2-digit', second: '2-digit', fractionalSecondDigits: 3
                        }));
                        console.log('🆔 ID:', data.id || 'default');
                        if (data.from && data.to) console.log(`🔄 Mudança: ${data.from} → ${data.to}`);
                        if (data.duration) console.log(`⏱️ Duração esperada: ${data.duration}ms`);
                        console.groupEnd();
                    } else {
                        const change = data.from && data.to ? ` ${data.from} → ${data.to}` : '';
                        console.log(`${this.prefix} 🎬 Transição iniciada${change}`);
                    }
                } else if (action === 'END') {
                    const duration = data.duration || Math.floor(Math.random() * 500) + 200;
                    const isSlowly = duration > 300;
                    const icon = isSlowly ? '🐌' : '⚡';
                    console.log(`${this.prefix} ${icon} Transição finalizada em ${duration}ms${isSlowly ? ' (lenta!)' : ''}`);
                }
            }

            showCapabilities() {
                console.group(`${this.prefix} 📚 Logger ED | Acima das Nuvens`);
                console.log(`🔧 Modo atual: ${this.verboseMode ? 'VERBOSE' : 'PADRÃO'}`);
                console.log('');
                if (this.verboseMode) {
                    console.log('📊 MODO VERBOSE - Logs detalhados para debugging');
                    console.log('• Timestamps precisos com milissegundos');
                    console.log('• Grupos expandidos com dados completos');
                    console.log('• Todos os eventos rastreados');
                } else {
                    console.log('👨‍💻 MODO PADRÃO - Logs essenciais para humanos');
                    console.log('• Mensagens simples e diretas');
                    console.log('• Apenas eventos importantes');
                    console.log('• Resumos automáticos de dados');
                }
                console.groupEnd();
            }

            getTransitionStats() {
                return {
                    transições_ativas: 0,
                    modo_verbose: this.verboseMode,
                    preferência_salva: localStorage.getItem('ed-logger-verbose') || 'false'
                };
            }

            clear() {
                console.clear();
                console.log(`${this.prefix} Console limpo`);
            }
        }

        // Instanciar o logger demo
        window.logger = new DemoLogger();
        
        // Funções globais para os botões
        window.toggleVerbose = () => {
            logger.setVerbose(!logger.isVerbose());
        };

        window.testThemeLogs = () => {
            logger.theme('APPLY_THEME', { from: 'light', to: 'dark' });
            setTimeout(() => {
                logger.theme('THEME_APPLIED', { tema: 'dark', sucesso: true });
            }, 100);
        };

        window.testComponentLogs = () => {
            logger.component('ThemeToggle', 'MOUNT', { tema: 'dark' });
            setTimeout(() => {
                logger.component('Welcome', 'UPDATE', { animações: 'ativas' });
            }, 100);
        };

        window.testAnimationLogs = () => {
            logger.animation('START', { tipo: 'nuvens', duração: '300ms' });
            setTimeout(() => {
                logger.animation('PROGRESS', { progresso: '50%' });
            }, 150);
            setTimeout(() => {
                logger.animation('COMPLETE', { resultado: 'sucesso' });
            }, 300);
        };

        window.testTransitionLogs = () => {
            logger.transition('START', { id: 'demo', from: 'light', to: 'dark', duration: 300 });
            setTimeout(() => {
                logger.transition('END', { id: 'demo', duration: Math.floor(Math.random() * 600) + 200 });
            }, 350);
        };

        window.showStats = () => {
            console.table(logger.getTransitionStats());
        };

        window.showCapabilities = () => {
            logger.showCapabilities();
        };

        window.clearConsole = () => {
            logger.clear();
        };

        // Inicializar status
        logger.updateStatus();
        
        // Mostrar capacidades na primeira carga
        logger.showCapabilities();
    </script>
</body>
</html>
